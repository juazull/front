{"remainingRequest":"C:\\Users\\User\\Documents\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Documents\\front\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\User\\Documents\\front\\src\\services\\auth.js","dependencies":[{"path":"C:\\Users\\User\\Documents\\front\\src\\services\\auth.js","mtime":1645134889185},{"path":"C:\\Users\\User\\Documents\\front\\babel.config.js","mtime":1645134889137},{"path":"C:\\Users\\User\\Documents\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\User\\Documents\\front\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvVXNlci9Eb2N1bWVudHMvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7Ci8vIFNlcnZpY2VzIGVzIGNvbW8gc29sZW1vcyBsbGFtYXIgYSBhcmNoaXZvIHF1ZSBleHBvcnRhciBhbGd1bmEgZnVuY2lvbmFsaWRhZCBwYXJhIHF1ZSBlbCByZXN0byBkZWwKLy8gc2lzdGVtYSAoZWo6IGNvbXBvbmVudGVzKSBwdWVkYW4gdXRpbGl6YXIuCmltcG9ydCB7IGFwaUZldGNoIH0gZnJvbSAiLi4vZnVuY3Rpb25zL2ZldGNoLmpzIjsgLy9pbXBvcnQgeyBBUElfSE9TVCB9IGZyb20gIi4uL2NvbnN0YW50cy9hcGkuanMiOwoKdmFyIHVzZXJEYXRhID0gewogIGlkOiBudWxsLAogIHVzdWFyaW86IG51bGwsCiAgZW1haWw6IG51bGwKfTsKLyoqDQogKiBPYmpldG8gZGVsIHNlcnZpY2lvLCBjb250aWVuZSB0b2RvcyBsb3MgbcOpdG9kb3MgcGVydGluZW50ZXMuDQogKg0KICogQHR5cGUge3t9fQ0KICovCgp2YXIgYXV0aFNlcnZpY2UgPSB7CiAgLyoqDQogICAqIEhhY2UgbGEgcGV0aWNpw7NuIGRlIGxvZ2luIGFsIGJhY2tlbmQsIHkgZGUgdGVuZXIgw6l4aXRvLCBtYXJjYSBhbCB1c3VhcmlvIGNvbW8gYXV0ZW50aWNhZG8uDQogICAqDQogICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbA0KICAgKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQNCiAgICogQHJldHVybiB7UHJvbWlzZTwqPn0NCiAgICovCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGVtYWlsLCBwYXNzd29yZCkgewogICAgLy8JCXJldHVybiBhcGlGZXRjaCgnL2xvZ2luLnBocCcsIHsKICAgIHJldHVybiBhcGlGZXRjaCgnL2luaWNpYXItc2VzaW9uJywgewogICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgLy8gTWFyY2Ftb3MgY29tbyBhdXRlbnRpY2FkbyBhbCB1c3VhcmlvLCBndWFyZGFuZG8gbGEgZGF0YSBlbiB1c2VyRGF0YS4KICAgICAgICB1c2VyRGF0YSA9IHsKICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLnVzdWFyaW8uaWQsCiAgICAgICAgICB1c3VhcmlvOiByZXNwb25zZS5kYXRhLnVzdWFyaW8udXN1YXJpbywKICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhLnVzdWFyaW8uZW1haWwKICAgICAgICB9OyAvLyBHdWFyZGFtb3MgZW4gbG9jYWxTdG9yYWdlIGVsIGVzdGFkbyBkZWwgdXN1YXJpby4KCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJywgSlNPTi5zdHJpbmdpZnkodXNlckRhdGEpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSk7CiAgfSwKCiAgLyoqDQogICAqDQogICAqIEByZXR1cm4ge2Jvb2xlYW59DQogICAqLwogIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkgewogICAgcmV0dXJuIHVzZXJEYXRhLmlkICE9PSBudWxsOwogIH0sCgogIC8qKg0KICAgKg0KICAgKi8KICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgIHJldHVybiBhcGlGZXRjaCgiL2NlcnJhci1zZXNpb24iLCB7CiAgICAgIG1ldGhvZDogInBvc3QiCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdXNlckRhdGEgPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgdXN1YXJpbzogbnVsbCwKICAgICAgICBlbWFpbDogbnVsbAogICAgICB9OwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlckRhdGEiKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9LAoKICAvKioNCiAgICoNCiAgICogQHJldHVybiB7e3VzdWFyaW86IG51bGwsIGlkOiBudWxsLCBlbWFpbDogbnVsbH19DQogICAqLwogIGdldFVzZXJEYXRhOiBmdW5jdGlvbiBnZXRVc2VyRGF0YSgpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCB1c2VyRGF0YSk7CiAgfQp9OyAvLyBMZWVtb3MgbG9jYWxTdG9yYWdlIHBhcmEgdmVyIHNpIGVsIHVzdWFyaW8gZXN0w6EgYXV0ZW50aWNhZG8gbyBuby4KCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckRhdGEnKSAhPT0gbnVsbCkgewogIHVzZXJEYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckRhdGEnKSk7Cn0KCmV4cG9ydCBkZWZhdWx0IGF1dGhTZXJ2aWNlOw=="},{"version":3,"sources":["C:/Users/User/Documents/front/src/services/auth.js"],"names":["apiFetch","userData","id","usuario","email","authService","login","password","method","body","JSON","stringify","then","response","success","data","localStorage","setItem","isAuthenticated","logout","res","removeItem","getUserData","getItem","parse"],"mappings":";;AAAA;AACA;AACA,SAASA,QAAT,QAAyB,uBAAzB,C,CACA;;AAEA,IAAIC,QAAQ,GAAG;AACdC,EAAAA,EAAE,EAAE,IADU;AAEdC,EAAAA,OAAO,EAAE,IAFK;AAGdC,EAAAA,KAAK,EAAE;AAHO,CAAf;AAMA;AACA;AACA;AACA;AACA;;AACA,IAAMC,WAAW,GAAG;AACnB;AACD;AACA;AACA;AACA;AACA;AACA;AACCC,EAAAA,KARmB,iBAQbF,KARa,EAQNG,QARM,EAQI;AACxB;AACE,WAAOP,QAAQ,CAAC,iBAAD,EAAoB;AAClCQ,MAAAA,MAAM,EAAE,MAD0B;AAElCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACpBP,QAAAA,KAAK,EAALA,KADoB;AAEpBG,QAAAA,QAAQ,EAARA;AAFoB,OAAf;AAF4B,KAApB,CAAR,CAMJK,IANI,CAMC,UAAAC,QAAQ,EAAI;AACnB,UAAIA,QAAQ,CAACC,OAAb,EAAsB;AACrB;AACAb,QAAAA,QAAQ,GAAG;AACVC,UAAAA,EAAE,EAAEW,QAAQ,CAACE,IAAT,CAAcZ,OAAd,CAAsBD,EADhB;AAEVC,UAAAA,OAAO,EAAEU,QAAQ,CAACE,IAAT,CAAcZ,OAAd,CAAsBA,OAFrB;AAGVC,UAAAA,KAAK,EAAES,QAAQ,CAACE,IAAT,CAAcZ,OAAd,CAAsBC;AAHnB,SAAX,CAFqB,CAOrB;;AACAY,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCP,IAAI,CAACC,SAAL,CAAeV,QAAf,CAAjC;AACA;;AACD,aAAOY,QAAP;AACA,KAlBM,CAAP;AAmBA,GA7BkB;;AA+BnB;AACD;AACA;AACA;AACCK,EAAAA,eAnCmB,6BAmCD;AACjB,WAAOjB,QAAQ,CAACC,EAAT,KAAgB,IAAvB;AACA,GArCkB;;AAuCnB;AACD;AACA;AACCiB,EAAAA,MA1CmB,oBA0CV;AACR,WAAOnB,QAAQ,CAAC,gBAAD,EAAmB;AAC9BQ,MAAAA,MAAM,EAAE;AADsB,KAAnB,CAAR,CAEFI,IAFE,CAEG,UAACQ,GAAD,EAAS;AACfnB,MAAAA,QAAQ,GAAG;AACTC,QAAAA,EAAE,EAAE,IADK;AAETC,QAAAA,OAAO,EAAE,IAFA;AAGTC,QAAAA,KAAK,EAAE;AAHE,OAAX;AAKAY,MAAAA,YAAY,CAACK,UAAb,CAAwB,UAAxB;AACA,aAAO,IAAP;AACD,KAVI,CAAP;AAWA,GAtDkB;;AAwDnB;AACD;AACA;AACA;AACCC,EAAAA,WA5DmB,yBA4DL;AACb,6BACIrB,QADJ;AAOA;AApEkB,CAApB,C,CAuEA;;AACA,IAAIe,YAAY,CAACO,OAAb,CAAqB,UAArB,MAAqC,IAAzC,EAA+C;AAC9CtB,EAAAA,QAAQ,GAAGS,IAAI,CAACc,KAAL,CAAWR,YAAY,CAACO,OAAb,CAAqB,UAArB,CAAX,CAAX;AACA;;AAED,eAAelB,WAAf","sourcesContent":["// Services es como solemos llamar a archivo que exportar alguna funcionalidad para que el resto del\r\n// sistema (ej: componentes) puedan utilizar.\r\nimport { apiFetch } from \"../functions/fetch.js\";\r\n//import { API_HOST } from \"../constants/api.js\";\r\n\r\nlet userData = {\r\n\tid: null,\r\n\tusuario: null,\r\n\temail: null,\r\n};\r\n\r\n/**\r\n * Objeto del servicio, contiene todos los métodos pertinentes.\r\n *\r\n * @type {{}}\r\n */\r\nconst authService = {\r\n\t/**\r\n\t * Hace la petición de login al backend, y de tener éxito, marca al usuario como autenticado.\r\n\t *\r\n\t * @param {string} email\r\n\t * @param {string} password\r\n\t * @return {Promise<*>}\r\n\t */\r\n\tlogin(email, password) {\r\n//\t\treturn apiFetch('/login.php', {\r\n\t\treturn apiFetch('/iniciar-sesion', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t}),\r\n\t\t}).then(response => {\r\n\t\t\tif (response.success) {\r\n\t\t\t\t// Marcamos como autenticado al usuario, guardando la data en userData.\r\n\t\t\t\tuserData = {\r\n\t\t\t\t\tid: response.data.usuario.id,\r\n\t\t\t\t\tusuario: response.data.usuario.usuario,\r\n\t\t\t\t\temail: response.data.usuario.email\r\n\t\t\t\t};\r\n\t\t\t\t// Guardamos en localStorage el estado del usuario.\r\n\t\t\t\tlocalStorage.setItem('userData', JSON.stringify(userData));\r\n\t\t\t}\r\n\t\t\treturn response;\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t * @return {boolean}\r\n\t */\r\n\tisAuthenticated() {\r\n\t\treturn userData.id !== null;\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tlogout() {\r\n\t\treturn apiFetch(\"/cerrar-sesion\", {\r\n      method: \"post\",\r\n    }).then((res) => {\r\n      userData = {\r\n        id: null,\r\n        usuario: null,\r\n        email: null,\r\n      };\r\n      localStorage.removeItem(\"userData\");\r\n      return true;\r\n    });\r\n\t}, \r\n\r\n\t/**\r\n\t *\r\n\t * @return {{usuario: null, id: null, email: null}}\r\n\t */\r\n\tgetUserData() {\r\n\t\treturn {\r\n\t\t\t...userData\r\n\t\t\t\r\n\t\t\t// id: userData.id\r\n\t\t\t// usuario: userData.usuario\r\n\t\t\t// email: userData.email\r\n\t\t};\r\n\t},\r\n};\r\n\r\n// Leemos localStorage para ver si el usuario está autenticado o no.\r\nif (localStorage.getItem('userData') !== null) {\r\n\tuserData = JSON.parse(localStorage.getItem('userData'));\r\n}\r\n\r\nexport default authService;\r\n"]}]}
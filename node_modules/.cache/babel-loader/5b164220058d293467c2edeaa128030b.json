{"remainingRequest":"C:\\Users\\User\\Documents\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Documents\\front\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\User\\Documents\\front\\src\\services\\auth.js","dependencies":[{"path":"C:\\Users\\User\\Documents\\front\\src\\services\\auth.js","mtime":1645572678263},{"path":"C:\\Users\\User\\Documents\\front\\babel.config.js","mtime":1645369024000},{"path":"C:\\Users\\User\\Documents\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\User\\Documents\\front\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvVXNlci9Eb2N1bWVudHMvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7Ci8vIFNlcnZpY2VzIGVzIGNvbW8gc29sZW1vcyBsbGFtYXIgYSBhcmNoaXZvIHF1ZSBleHBvcnRhciBhbGd1bmEgZnVuY2lvbmFsaWRhZCBwYXJhIHF1ZSBlbCByZXN0byBkZWwKLy8gc2lzdGVtYSAoZWo6IGNvbXBvbmVudGVzKSBwdWVkYW4gdXRpbGl6YXIuCmltcG9ydCB7IGFwaUZldGNoIH0gZnJvbSAiLi4vZnVuY3Rpb25zL2ZldGNoLmpzIjsgLy9pbXBvcnQgeyBBUElfSE9TVCB9IGZyb20gIi4uL2NvbnN0YW50cy9hcGkuanMiOwoKdmFyIHVzZXJEYXRhID0gewogIGlkOiBudWxsLAogIHVzdWFyaW86IG51bGwsCiAgZW1haWw6IG51bGwKfTsKLyoqCiAqIE9iamV0byBkZWwgc2VydmljaW8sIGNvbnRpZW5lIHRvZG9zIGxvcyBtw6l0b2RvcyBwZXJ0aW5lbnRlcy4KICoKICogQHR5cGUge3t9fQogKi8KCnZhciBhdXRoU2VydmljZSA9IHsKICAvKioKICAgKiBIYWNlIGxhIHBldGljacOzbiBkZSBsb2dpbiBhbCBiYWNrZW5kLCB5IGRlIHRlbmVyIMOpeGl0bywgbWFyY2EgYWwgdXN1YXJpbyBjb21vIGF1dGVudGljYWRvLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsCiAgICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkCiAgICogQHJldHVybiB7UHJvbWlzZTwqPn0KICAgKi8KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oZW1haWwsIHBhc3N3b3JkKSB7CiAgICAvLwkJcmV0dXJuIGFwaUZldGNoKCcvbG9naW4ucGhwJywgewogICAgcmV0dXJuIGFwaUZldGNoKCcvaW5pY2lhci1zZXNpb24nLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgZW1haWw6IGVtYWlsLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAvLyBNYXJjYW1vcyBjb21vIGF1dGVudGljYWRvIGFsIHVzdWFyaW8sIGd1YXJkYW5kbyBsYSBkYXRhIGVuIHVzZXJEYXRhLgogICAgICAgIHVzZXJEYXRhID0gewogICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEudXN1YXJpby5pZCwKICAgICAgICAgIHVzdWFyaW86IHJlc3BvbnNlLmRhdGEudXN1YXJpby51c3VhcmlvLAogICAgICAgICAgZW1haWw6IHJlc3BvbnNlLmRhdGEudXN1YXJpby5lbWFpbAogICAgICAgIH07IC8vIEd1YXJkYW1vcyBlbiBsb2NhbFN0b3JhZ2UgZWwgZXN0YWRvIGRlbCB1c3VhcmlvLgoKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckRhdGEnLCBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSkpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICB9KTsKICB9LAoKICAvKioKICAgKgogICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICovCiAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7CiAgICByZXR1cm4gdXNlckRhdGEuaWQgIT09IG51bGw7CiAgfSwKCiAgLyoqCiAgICoKICAgKi8KICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgIHJldHVybiBhcGlGZXRjaCgiL2NlcnJhci1zZXNpb24iLCB7CiAgICAgIG1ldGhvZDogInBvc3QiCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdXNlckRhdGEgPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgdXN1YXJpbzogbnVsbCwKICAgICAgICBlbWFpbDogbnVsbAogICAgICB9OwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlckRhdGEiKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9LAoKICAvKioKICAgKgogICAqIEByZXR1cm4ge3t1c3VhcmlvOiBudWxsLCBpZDogbnVsbCwgZW1haWw6IG51bGx9fQogICAqLwogIGdldFVzZXJEYXRhOiBmdW5jdGlvbiBnZXRVc2VyRGF0YSgpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCB1c2VyRGF0YSk7CiAgfQp9OyAvLyBMZWVtb3MgbG9jYWxTdG9yYWdlIHBhcmEgdmVyIHNpIGVsIHVzdWFyaW8gZXN0w6EgYXV0ZW50aWNhZG8gbyBuby4KCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckRhdGEnKSAhPT0gbnVsbCkgewogIHVzZXJEYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckRhdGEnKSk7Cn0KCmV4cG9ydCBkZWZhdWx0IGF1dGhTZXJ2aWNlOw=="},{"version":3,"sources":["C:/Users/User/Documents/front/src/services/auth.js"],"names":["apiFetch","userData","id","usuario","email","authService","login","password","method","body","JSON","stringify","then","response","success","data","localStorage","setItem","isAuthenticated","logout","res","removeItem","getUserData","getItem","parse"],"mappings":";;AAAA;AACA;AACA,SAASA,QAAT,QAAyB,uBAAzB,C,CACA;;AAEA,IAAIC,QAAQ,GAAG;AACdC,EAAAA,EAAE,EAAE,IADU;AAEdC,EAAAA,OAAO,EAAE,IAFK;AAGdC,EAAAA,KAAK,EAAE;AAHO,CAAf;AAMA;AACA;AACA;AACA;AACA;;AACA,IAAMC,WAAW,GAAG;AACnB;AACD;AACA;AACA;AACA;AACA;AACA;AACCC,EAAAA,KARmB,iBAQbF,KARa,EAQNG,QARM,EAQI;AACxB;AACE,WAAOP,QAAQ,CAAC,iBAAD,EAAoB;AAClCQ,MAAAA,MAAM,EAAE,MAD0B;AAElCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACpBP,QAAAA,KAAK,EAALA,KADoB;AAEpBG,QAAAA,QAAQ,EAARA;AAFoB,OAAf;AAF4B,KAApB,CAAR,CAMJK,IANI,CAMC,UAAAC,QAAQ,EAAI;AACnB,UAAIA,QAAQ,CAACC,OAAb,EAAsB;AACrB;AACAb,QAAAA,QAAQ,GAAG;AACVC,UAAAA,EAAE,EAAEW,QAAQ,CAACE,IAAT,CAAcZ,OAAd,CAAsBD,EADhB;AAEVC,UAAAA,OAAO,EAAEU,QAAQ,CAACE,IAAT,CAAcZ,OAAd,CAAsBA,OAFrB;AAGVC,UAAAA,KAAK,EAAES,QAAQ,CAACE,IAAT,CAAcZ,OAAd,CAAsBC;AAHnB,SAAX,CAFqB,CAOrB;;AACAY,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCP,IAAI,CAACC,SAAL,CAAeV,QAAf,CAAjC;AACA;;AACD,aAAOY,QAAP;AACA,KAlBM,CAAP;AAmBA,GA7BkB;;AA+BnB;AACD;AACA;AACA;AACCK,EAAAA,eAnCmB,6BAmCD;AACjB,WAAOjB,QAAQ,CAACC,EAAT,KAAgB,IAAvB;AACA,GArCkB;;AAuCnB;AACD;AACA;AACCiB,EAAAA,MA1CmB,oBA0CV;AACR,WAAOnB,QAAQ,CAAC,gBAAD,EAAmB;AAAEQ,MAAAA,MAAM,EAAE;AAAV,KAAnB,CAAR,CACLI,IADK,CACA,UAAAQ,GAAG,EAAI;AACZnB,MAAAA,QAAQ,GAAG;AACVC,QAAAA,EAAE,EAAE,IADM;AAEVC,QAAAA,OAAO,EAAE,IAFC;AAGVC,QAAAA,KAAK,EAAE;AAHG,OAAX;AAMAY,MAAAA,YAAY,CAACK,UAAb,CAAwB,UAAxB;AAEA,aAAO,IAAP;AACA,KAXK,CAAP;AAYA,GAvDkB;;AAyDnB;AACD;AACA;AACA;AACCC,EAAAA,WA7DmB,yBA6DL;AACb,6BACIrB,QADJ;AAGA;AAjEkB,CAApB,C,CAoEA;;AACA,IAAGe,YAAY,CAACO,OAAb,CAAqB,UAArB,MAAqC,IAAxC,EAA6C;AAC5CtB,EAAAA,QAAQ,GAAGS,IAAI,CAACc,KAAL,CAAWR,YAAY,CAACO,OAAb,CAAqB,UAArB,CAAX,CAAX;AACA;;AAED,eAAelB,WAAf","sourcesContent":["// Services es como solemos llamar a archivo que exportar alguna funcionalidad para que el resto del\n// sistema (ej: componentes) puedan utilizar.\nimport { apiFetch } from \"../functions/fetch.js\";\n//import { API_HOST } from \"../constants/api.js\";\n\nlet userData = {\n\tid: null,\n\tusuario: null,\n\temail: null,\n};\n\n/**\n * Objeto del servicio, contiene todos los métodos pertinentes.\n *\n * @type {{}}\n */\nconst authService = {\n\t/**\n\t * Hace la petición de login al backend, y de tener éxito, marca al usuario como autenticado.\n\t *\n\t * @param {string} email\n\t * @param {string} password\n\t * @return {Promise<*>}\n\t */\n\tlogin(email, password) {\n//\t\treturn apiFetch('/login.php', {\n\t\treturn apiFetch('/iniciar-sesion', {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t}),\n\t\t}).then(response => {\n\t\t\tif (response.success) {\n\t\t\t\t// Marcamos como autenticado al usuario, guardando la data en userData.\n\t\t\t\tuserData = {\n\t\t\t\t\tid: response.data.usuario.id,\n\t\t\t\t\tusuario: response.data.usuario.usuario,\n\t\t\t\t\temail: response.data.usuario.email\n\t\t\t\t};\n\t\t\t\t// Guardamos en localStorage el estado del usuario.\n\t\t\t\tlocalStorage.setItem('userData', JSON.stringify(userData));\n\t\t\t}\n\t\t\treturn response;\n\t\t});\n\t},\n\n\t/**\n\t *\n\t * @return {boolean}\n\t */\n\tisAuthenticated() {\n\t\treturn userData.id !== null;\n\t},\n\n\t/**\n\t *\n\t */\n\tlogout() {\n\t\treturn apiFetch(\"/cerrar-sesion\", { method: \"post\" })\n\t\t\t.then(res => {\n\t\t\t\tuserData = {\n\t\t\t\t\tid: null,\n\t\t\t\t\tusuario: null,\n\t\t\t\t\temail: null,\n\t\t\t\t};\n\n\t\t\t\tlocalStorage.removeItem(\"userData\");\n\n\t\t\t\treturn true;\n\t\t\t})\n\t}, \n\n\t/**\n\t *\n\t * @return {{usuario: null, id: null, email: null}}\n\t */\n\tgetUserData() {\n\t\treturn {\n\t\t\t...userData\n\t\t};\n\t},\n};\n\n// Leemos localStorage para ver si el usuario está autenticado o no.\nif(localStorage.getItem('userData') !== null){\n\tuserData = JSON.parse(localStorage.getItem('userData'));\n}\n\nexport default authService;\n"]}]}